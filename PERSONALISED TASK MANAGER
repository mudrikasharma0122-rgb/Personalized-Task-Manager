import datetime

# This function saves user info in a text file
def user_information(username, password):
    name = input("Enter your name: ")
    address = input("Enter your address: ")
    age = input("Enter your age: ")
    filename = username + "_data.txt"
    f = open(filename, "w")
    f.write(password + "\n")
    f.write("Name: " + name + "\n")
    f.write("Address: " + address + "\n")
    f.write("Age: " + age + "\n")
    f.write("\n---- TASKS ----\n")
    f.close()

    print("Account created successfully!\n")

# Signup function for new users
def signup():
    print("Create your account")
    username = input("Enter a username: ")
    password = input("Enter a password: ")

    user_information(username, password)
    print("Please login to continue")
    login()

# Login function
def login():
    username = input("Enter username: ")
    entered_password = input("Enter password: ")

    filename = username + "_data.txt"
    try:
        f = open(filename, "r")
        saved_password = f.readline().strip()
        f.close()

        if entered_password == saved_password:
            print("\nLogin successful!")
            print("1 - View profile data")
            print("2 - Add tasks")
            print("3 - Update task status")
            print("4 - View task status")

            choice = input("Choose an option: ")

            if choice == "1":
                view_data(filename)
            elif choice == "2":
                add_tasks(filename)
            elif choice == "3":
                update_task_status(username)
            elif choice == "4":
                view_task_status(username)
            else:
                print("Invalid choice")

        else:
            print("Wrong username or password! Try again.")
            login()
    except:
        print("User not found! Please signup first.")
        signup()

# View data from user file
def view_data(filename):
    f = open(filename, "r")
    print("\n--- USER DATA ---")
    print(f.read())
    f.close()

# Function to add tasks
def add_tasks(filename):
    n = int(input("How many tasks do you want to add? "))

    f = open(filename, "a")

    for i in range(1, n + 1):
        task = input("Enter Task " + str(i) + ": ")
        target = input("Enter Target " + str(i) + ": ")

        f.write("Task " + str(i) + ": " + task + "\n")
        f.write("Target " + str(i) + ": " + target + "\n")

        stop = input("Press space to stop, or Enter to continue: ")
        if stop == " ":
            break

    f.close()
    print("Tasks added successfully!\n")

# Function to update task status
def update_task_status(username):
    filename = username + "_status.txt"

    completed = input("Enter completed tasks: ")
    not_started = input("Enter tasks not started: ")
    ongoing = input("Enter tasks in progress: ")

    f = open(filename, "a")
    f.write("\n" + str(datetime.datetime.now()) + "\n")
    f.write("Completed: " + completed + "\n")
    f.write("Ongoing: " + ongoing + "\n")
    f.write("Not Started: " + not_started + "\n")
    f.close()

    print("Task status updated!\n")

# View task status
def view_task_status(username):
    filename = username + "_status.txt"

    try:
        f = open(filename, "r")
        print("\n--- TASK STATUS ---")
        print(f.read())
        f.close()
    except:
        print("No task status found. Please update status first.")

# Main program starts here
if __name__ == "__main__":
    print("WELCOME TO PERSONAL TASK MANAGER")
    new_user = int(input("Are you new here? Press 1 for Yes, 0 for No: "))
    if new_user == 1:
        signup()
    elif new_user == 0:
        login()
    else:
        print("Invalid input!")



   
   
